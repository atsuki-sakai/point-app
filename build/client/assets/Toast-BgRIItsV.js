import{R as r,r as s,A as Ue}from"./components-BGDyOe_B.js";import{M as Te,c as E,j as ze,h as Ve,s as Ke,E as Z,u as D,v as q,F as Xe,e as P,K as j,G as $,H as qe,J as Qe,L as Ze,N as Ye,a as I,b as Q,I as w,O as me,w as Je,W as et,Q as Pe,R as tt,y as at,r as nt,l as H,V as rt,X as ot}from"./Page-BlBOquBD.js";import{E as ie,p as it,j as st,l as fe,k as lt,U as ct}from"./context-D0ShNtlm.js";import{_ as ut,b as dt,c as mt,T as pe,d as ft,C as se,I as pt,a as gt,s as ge}from"./Layout-9hDooW2t.js";import{S as ht,F as vt}from"./context-DraICPrr.js";var _e=function(a){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),r.createElement("path",{d:"M10 6.75a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),r.createElement("path",{d:"M11 13.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),r.createElement("path",{fillRule:"evenodd",d:"M10 3.5c-1.045 0-1.784.702-2.152 1.447a449.26 449.26 0 0 1-2.005 3.847l-.028.052a403.426 403.426 0 0 0-2.008 3.856c-.372.752-.478 1.75.093 2.614.57.863 1.542 1.184 2.464 1.184h7.272c.922 0 1.895-.32 2.464-1.184.57-.864.465-1.862.093-2.614-.21-.424-1.113-2.147-2.004-3.847l-.032-.061a429.497 429.497 0 0 1-2.005-3.847c-.368-.745-1.107-1.447-2.152-1.447Zm-.808 2.112c.404-.816 1.212-.816 1.616 0 .202.409 1.112 2.145 2.022 3.88a418.904 418.904 0 0 1 2.018 3.875c.404.817 0 1.633-1.212 1.633h-7.272c-1.212 0-1.617-.816-1.212-1.633.202-.408 1.113-2.147 2.023-3.883a421.932 421.932 0 0 0 2.017-3.872Z"}))};_e.displayName="AlertTriangleIcon";var le=function(a){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),r.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};le.displayName="XIcon";var ke=function(a){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),r.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};ke.displayName="XSmallIcon";var re={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Et(){const e=s.useContext(ht);if(!e)throw new Te("No ScrollLockManager was provided.");return e}function bt(e){const a=Et();return s.useEffect(()=>(a.registerScrollLock(),()=>{a.unregisterScrollLock()}),[a]),null}function Be(e){const{onClick:a,onTouchStart:n,belowNavigation:t,transparent:o,setClosing:i}=e,l=E(re.Backdrop,t&&re.belowNavigation,o&&re.transparent),u=()=>{i&&i(!0)},c=()=>{i&&i(!1),a&&a()};return r.createElement(r.Fragment,null,r.createElement(bt,null),r.createElement("div",{className:l,onClick:c,onTouchStart:n,onMouseDown:u}))}var Ct={InlineGrid:"Polaris-InlineGrid"};function yt({children:e,columns:a,gap:n,alignItems:t}){const o={...ze("inline-grid","grid-template-columns",Ft(a)),...Ve("inline-grid","gap","space",n),"--pc-inline-grid-align-items":t};return r.createElement("div",{className:Ct.InlineGrid,style:Ke(o)},e)}function Ft(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([a,n])=>[a,he(n)])):he(e)}function he(e){if(e)return typeof e=="number"||!isNaN(Number(e))?`repeat(${Number(e)}, minmax(0, 1fr))`:typeof e=="string"?e:e.map(a=>{switch(a){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const ce=s.createContext(void 0);function Ae(){const e=s.useContext(ce);if(!e)throw new Error("No Frame context was provided. Your component must be wrapped in a <Frame> component. See https://polaris.shopify.com/components/internal-only/frame for implementation instructions.");return e}var St=typeof Element<"u",Nt=typeof Map=="function",Mt=typeof Set=="function",xt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function X(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var n,t,o;if(Array.isArray(e)){if(n=e.length,n!=a.length)return!1;for(t=n;t--!==0;)if(!X(e[t],a[t]))return!1;return!0}var i;if(Nt&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(i=e.entries();!(t=i.next()).done;)if(!a.has(t.value[0]))return!1;for(i=e.entries();!(t=i.next()).done;)if(!X(t.value[1],a.get(t.value[0])))return!1;return!0}if(Mt&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(i=e.entries();!(t=i.next()).done;)if(!a.has(t.value[0]))return!1;return!0}if(xt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if(n=e.length,n!=a.length)return!1;for(t=n;t--!==0;)if(e[t]!==a[t])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof a.valueOf=="function")return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof a.toString=="function")return e.toString()===a.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(a).length)return!1;for(t=n;t--!==0;)if(!Object.prototype.hasOwnProperty.call(a,o[t]))return!1;if(St&&e instanceof Element)return!1;for(t=n;t--!==0;)if(!((o[t]==="_owner"||o[t]==="__v"||o[t]==="__o")&&e.$$typeof)&&!X(e[o[t]],a[o[t]]))return!1;return!0}return e!==e&&a!==a}var Tt=function(a,n){try{return X(a,n)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}};const Pt=Ue(Tt),_t=s.memo(function({children:a,disabled:n,root:t}){return s.useEffect(()=>{if(n||!t)return;const o=kt(t)?t.current:t;!o||o.querySelector("[autofocus]")||Z(o,!1)},[n,t]),r.createElement(r.Fragment,null,a)});function kt(e){return e.current!==void 0}function Bt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,a){var n=function(i){return a&&s.isValidElement(i)?a(i):i},t=Object.create(null);return e&&s.Children.map(e,function(o){return o}).forEach(function(o){t[o.key]=n(o)}),t}function At(e,a){e=e||{},a=a||{};function n(d){return d in a?a[d]:e[d]}var t=Object.create(null),o=[];for(var i in e)i in a?o.length&&(t[i]=o,o=[]):o.push(i);var l,u={};for(var c in a){if(t[c])for(l=0;l<t[c].length;l++){var g=t[c][l];u[t[c][l]]=n(g)}u[c]=n(c)}for(l=0;l<o.length;l++)u[o[l]]=n(o[l]);return u}function R(e,a,n){return n[a]!=null?n[a]:e.props[a]}function Rt(e,a){return ue(e.children,function(n){return s.cloneElement(n,{onExited:a.bind(null,n),in:!0,appear:R(n,"appear",e),enter:R(n,"enter",e),exit:R(n,"exit",e)})})}function wt(e,a,n){var t=ue(e.children),o=At(a,t);return Object.keys(o).forEach(function(i){var l=o[i];if(s.isValidElement(l)){var u=i in a,c=i in t,g=a[i],d=s.isValidElement(g)&&!g.props.in;c&&(!u||d)?o[i]=s.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:R(l,"exit",e),enter:R(l,"enter",e)}):!c&&u&&!d?o[i]=s.cloneElement(l,{in:!1}):c&&u&&s.isValidElement(g)&&(o[i]=s.cloneElement(l,{onExited:n.bind(null,l),in:g.props.in,exit:R(l,"exit",e),enter:R(l,"enter",e)}))}}),o}var It=Object.values||function(e){return Object.keys(e).map(function(a){return e[a]})},Dt={component:"div",childFactory:function(a){return a}},Y=function(e){ut(a,e);function a(t,o){var i;i=e.call(this,t,o)||this;var l=i.handleExited.bind(Bt(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var n=a.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},a.getDerivedStateFromProps=function(o,i){var l=i.children,u=i.handleExited,c=i.firstRender;return{children:c?Rt(o,u):wt(o,l,u),firstRender:!1}},n.handleExited=function(o,i){var l=ue(this.props.children);o.key in l||(o.props.onExited&&o.props.onExited(i),this.mounted&&this.setState(function(u){var c=dt({},u.children);return delete c[o.key],{children:c}}))},n.render=function(){var o=this.props,i=o.component,l=o.childFactory,u=mt(o,["component","childFactory"]),c=this.state.contextValue,g=It(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,i===null?r.createElement(pe.Provider,{value:c},g):r.createElement(pe.Provider,{value:c},r.createElement(i,u,g))},a}(r.Component);Y.propTypes={};Y.defaultProps=Dt;var b={Frame:"Polaris-Frame",Navigation:"Polaris-Frame__Navigation",hasTopBar:"Polaris-Frame--hasTopBar","Navigation-enter":"Polaris-Frame__Navigation--enter","Navigation-enterActive":"Polaris-Frame__Navigation--enterActive","Navigation-exit":"Polaris-Frame__Navigation--exit","Navigation-exitActive":"Polaris-Frame__Navigation--exitActive",NavigationDismiss:"Polaris-Frame__NavigationDismiss","Navigation-visible":"Polaris-Frame__Navigation--visible",TopBar:"Polaris-Frame__TopBar",ContextualSaveBar:"Polaris-Frame__ContextualSaveBar",Main:"Polaris-Frame__Main",hasNav:"Polaris-Frame--hasNav",Content:"Polaris-Frame__Content",hasSidebar:"Polaris-Frame--hasSidebar",GlobalRibbonContainer:"Polaris-Frame__GlobalRibbonContainer",LoadingBar:"Polaris-Frame__LoadingBar",Skip:"Polaris-Frame__Skip",focused:"Polaris-Frame--focused",pressed:"Polaris-Frame--pressed"};function Lt(){const e=s.useRef(!1);return s.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var ve={Loading:"Polaris-Frame-Loading",Level:"Polaris-Frame-Loading__Level"};const Ee=99;function Ot(){const e=D(),a=Lt(),[n,t]=s.useState(0),[o,i]=s.useState(!1);s.useEffect(()=>{n>=Ee||o||requestAnimationFrame(()=>{if(!a.current)return;const u=Math.max((Ee-n)/10,1);i(!0),t(n+u)})},[n,o,a]);const l={transform:`scaleX(${Math.floor(n)/100})`};return r.createElement("div",{className:ve.Loading,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":e.translate("Polaris.Loading.label")},r.createElement("div",{className:ve.Level,style:l,onTransitionEnd:()=>i(!1)}))}var be={startFade:"Polaris-Frame-CSSAnimation--startFade",endFade:"Polaris-Frame-CSSAnimation--endFade"},M;(function(e){e.Entering="entering",e.Entered="entered",e.Exiting="exiting",e.Exited="exited"})(M||(M={}));function Wt({in:e,className:a,type:n,children:t}){const[o,i]=s.useState(e?M.Entering:M.Exited),l=s.useRef(!1),u=s.useRef(null);s.useEffect(()=>{l.current&&o===M.Entering&&h(M.Entered)},[o]),s.useEffect(()=>{l.current&&(e&&h(M.Entering),!e&&h(M.Exiting))},[e]),s.useEffect(()=>{l.current=!0},[]);const c=E(a,be[q("start",n)],e&&be[q("end",n)]),g=o===M.Exited&&!e?null:t;return r.createElement("div",{className:c,ref:u,onTransitionEnd:d},g);function d(){o===M.Exiting&&h(M.Exited)}function h(f){i(f),f===M.Entering&&u.current&&u.current.getBoundingClientRect()}}function Re(e,a){if(!e)return null;const n=Object.keys(e);for(const t of n){if(t===a)return e[a];if(Xe(e[t])){const o=Re(e[t],a);if(o)return o}}return null}function Ht(e={},a=0,n="width"){const t=typeof e=="number"?e:Re(e,n);return t?`${t}px`:`${a}px`}var B={ContextualSaveBar:"Polaris-Frame-ContextualSaveBar",LogoContainer:"Polaris-Frame-ContextualSaveBar__LogoContainer",ContextControl:"Polaris-Frame-ContextualSaveBar__ContextControl",Contents:"Polaris-Frame-ContextualSaveBar__Contents",fullWidth:"Polaris-Frame-ContextualSaveBar--fullWidth",MessageContainer:"Polaris-Frame-ContextualSaveBar__MessageContainer",ActionContainer:"Polaris-Frame-ContextualSaveBar__ActionContainer",Action:"Polaris-Frame-ContextualSaveBar__Action"},oe={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Ce={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function we({children:e,flush:a=!1,subdued:n=!1,titleHidden:t=!1}){const o=E(Ce.Section,t&&Ce.titleHidden);return r.createElement("div",{className:o},r.createElement(P,Object.assign({as:"section",padding:a?"0":"400"},t&&{paddingInlineEnd:"0"},n&&{background:"bg-surface-tertiary"}),e))}var C={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function jt({trapping:e}){const a=s.useContext(vt),n=s.useId();if(!a)throw new Te("No FocusManager was provided.");const{trapFocusList:t,add:o,remove:i}=a,l=t[0]===n,u=s.useMemo(()=>({canSafelyFocus:l}),[l]);return s.useEffect(()=>{if(e)return o(n),()=>{i(n)}},[o,n,i,e]),u}function Ie({trapping:e=!0,children:a}){const{canSafelyFocus:n}=jt({trapping:e}),t=s.useRef(null),[o,i]=s.useState(!0);s.useEffect(()=>{const c=n&&!(t.current&&t.current.contains(document.activeElement))?!e:!0;i(c)},[n,e]);const l=c=>{const g=t.current&&t.current.contains(document.activeElement);e===!1||!t.current||g||c.target instanceof Element&&c.target.matches(`${it.selector} *`)||n&&c.target instanceof HTMLElement&&t.current!==c.target&&!t.current.contains(c.target)&&Z(t.current)},u=c=>{if(e===!1||!t.current)return;const g=qe(t.current),d=Qe(t.current);c.target===d&&!c.shiftKey&&(c.preventDefault(),Ze(t.current)),c.target===g&&c.shiftKey&&(c.preventDefault(),Ye(t.current))};return r.createElement(_t,{disabled:o,root:t.current},r.createElement("div",{ref:t},r.createElement(ie,{event:"focusin",handler:l}),r.createElement(j,{keyCode:$.Tab,keyEvent:"keydown",handler:u}),a))}function $t({instant:e,labelledBy:a,children:n,limitHeight:t,size:o,onClose:i,onExited:l,onEntered:u,setClosing:c,hasToasts:g,...d}){const h=st(),f=s.useRef(null),p=s.useContext(ce);let m;p&&(m=p.toastMessages);const y=E(C.Modal,o&&C[q("size",o)],t&&C.limitHeight),v=e?ft:Ut;s.useEffect(()=>{f.current&&!f.current.contains(document.activeElement)&&Z(f.current)},[]);const F=()=>{c&&c(!0)},S=()=>{c&&c(!1),i()},N=r.createElement("div",{"aria-live":"assertive"},m?m.map(x=>r.createElement(I,{visuallyHidden:!0,as:"p",key:x.id},x.content)):null);return r.createElement(v,Object.assign({},d,{nodeRef:f,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(h.motion["motion-duration-200"],10),onEntered:u,onExited:l}),r.createElement("div",{className:C.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:f},r.createElement(Ie,null,r.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":a,"aria-labelledby":a,tabIndex:-1,className:C.Dialog},r.createElement("div",{className:y},r.createElement(j,{keyCode:$.Escape,keyEvent:"keydown",handler:F}),r.createElement(j,{keyCode:$.Escape,handler:S}),n),N))))}const Gt={appear:E(C.animateFadeUp,C.entering),appearActive:E(C.animateFadeUp,C.entered),enter:E(C.animateFadeUp,C.entering),enterActive:E(C.animateFadeUp,C.entered),exit:E(C.animateFadeUp,C.exiting),exitActive:E(C.animateFadeUp,C.exited)};function Ut({children:e,...a}){return r.createElement(se,Object.assign({},a,{classNames:Gt}),e)}function ye({pressed:e,onClick:a}){const n=D();return r.createElement(Q,{variant:"tertiary",pressed:e,icon:le,onClick:a,accessibilityLabel:n.translate("Polaris.Common.close")})}function zt({id:e,children:a,closing:n,titleHidden:t,onClose:o}){const i="400",l="400";return t||!a?r.createElement(P,{position:"absolute",insetInlineEnd:i,insetBlockStart:l,zIndex:"1"},r.createElement(ye,{onClick:o})):r.createElement(P,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:i,paddingInlineEnd:i,borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},r.createElement(yt,{columns:{xs:"1fr auto"},gap:"400"},r.createElement(w,{gap:"400",blockAlign:"center"},r.createElement(I,{id:e,as:"h2",variant:"headingMd",breakWord:!0},a)),r.createElement(ye,{pressed:n,onClick:o})))}function Vt({primaryAction:e,secondaryActions:a,children:n}){const t=e&&me(e,{variant:"primary"})||null,o=a&&me(a)||null,i=t||o?r.createElement(w,{gap:"200"},o,t):null;return r.createElement(w,{gap:"400",blockAlign:"center"},r.createElement(P,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},r.createElement(w,{gap:"400",blockAlign:"center",align:"space-between"},r.createElement(P,null,n),i)))}const Fe=200,Kt=400,De=function({children:a,title:n,titleHidden:t=!1,src:o,iFrameName:i,open:l,instant:u,sectioned:c,loading:g,size:d,limitHeight:h,footer:f,primaryAction:p,secondaryActions:m,onScrolledToBottom:y,activator:v,activatorWrapper:F="div",onClose:S,onIFrameLoad:N,onTransitionEnd:x,noScroll:L}){const[O,_]=s.useState(Fe),[J,G]=s.useState(!1),U=s.useId(),z=s.useRef(null),ee=D().translate("Polaris.Modal.iFrameTitle");let V,K;const te=s.useCallback(()=>{x&&x()},[x]),We=s.useCallback(()=>{_(Fe);const k=v&&Se(v)?v&&v.current:z.current;k&&requestAnimationFrame(()=>Z(k))},[v]),He=s.useCallback(k=>{const W=k.target;if(W&&W.contentWindow)try{_(W.contentWindow.document.body.scrollHeight)}catch{_(Kt)}N!=null&&N(k)},[N]);if(l){const k=!f&&!p&&!m?null:r.createElement(Vt,{primaryAction:p,secondaryActions:m},f),W=c?Je(a,we,{titleHidden:t}):a,ne=g?r.createElement(P,{padding:"400"},r.createElement(w,{gap:"400",align:"center",blockAlign:"center"},r.createElement(at,null))):W,$e=L?r.createElement("div",{className:oe.NoScrollBody},r.createElement(P,{width:"100%",overflowX:"hidden",overflowY:"hidden"},ne)):r.createElement(tt,{shadow:!0,className:oe.Body,onScrolledToBottom:y},ne),Ge=o?r.createElement("iframe",{name:i,title:ee,src:o,className:oe.IFrame,onLoad:He,style:{height:`${O}px`}}):$e;V=r.createElement($t,{instant:u,labelledBy:U,onClose:S,onEntered:te,onExited:We,size:d,limitHeight:h,setClosing:G},r.createElement(zt,{titleHidden:t,id:U,closing:J,onClose:S},n),Ge,k),K=r.createElement(Be,{setClosing:G,onClick:S})}const ae=!u,je=v&&!Se(v)?r.createElement(P,{ref:z,as:F},v):null;return r.createElement(et.Provider,{value:!0},je,r.createElement(Pe,{idPrefix:"modal"},r.createElement(Y,{appear:ae,enter:ae,exit:ae},V),K))};function Se(e){return Object.prototype.hasOwnProperty.call(e,"current")}De.Section=we;function Xt({open:e,onDiscard:a,onCancel:n}){const t=D();return r.createElement(De,{title:t.translate("Polaris.DiscardConfirmationModal.title"),open:e,onClose:n,primaryAction:{content:t.translate("Polaris.DiscardConfirmationModal.primaryAction"),destructive:!0,onAction:a},secondaryActions:[{content:t.translate("Polaris.DiscardConfirmationModal.secondaryAction"),onAction:n}],sectioned:!0},t.translate("Polaris.DiscardConfirmationModal.message"))}function qt({alignContentFlush:e,message:a,saveAction:n,discardAction:t,fullWidth:o,contextControl:i,secondaryMenu:l}){const u=D(),{logo:c}=Ae(),{value:g,toggle:d,setFalse:h}=nt(!1),f=s.useCallback(()=>{t&&t.onAction&&t.onAction(),h()},[h,t]),p=t&&t.content?t.content:u.translate("Polaris.ContextualSaveBar.discard");let m;t&&t.discardConfirmationModal?m=d:t&&(m=t.onAction);const y=t&&t.onAction&&t.discardConfirmationModal&&r.createElement(Xt,{open:g,onCancel:d,onDiscard:f}),v=t&&r.createElement(Q,{variant:"tertiary",size:"large",url:t.url,onClick:m,loading:t.loading,disabled:t.disabled,accessibilityLabel:t.content},p),F=n&&n.content?n.content:u.translate("Polaris.ContextualSaveBar.save"),S=n&&r.createElement(Q,{variant:"primary",tone:"success",size:"large",url:n.url,onClick:n.onAction,loading:n.loading,disabled:n.disabled,accessibilityLabel:n.content},F),N=Ht(c,104),x=c&&r.createElement(pt,{style:{width:N},source:c.contextualSaveBarSource||"",alt:""}),L=e||i?null:r.createElement("div",{className:B.LogoContainer,style:{width:N}},x),O=i?r.createElement("div",{className:B.ContextControl},i):null,_=E(B.Contents,o&&B.fullWidth);return r.createElement(r.Fragment,null,r.createElement("div",{className:B.ContextualSaveBar},O,L,r.createElement("div",{className:_},r.createElement("div",{className:B.MessageContainer},r.createElement(H,{source:_e}),a&&r.createElement(I,{as:"h2",variant:"headingMd",tone:"text-inverse",truncate:!0},a)),r.createElement("div",{className:B.ActionContainer},r.createElement(gt,{spacing:"tight",wrap:!1},l,v,S)))),y)}function Le(e,a=Pt){const n=s.useRef(e);return a(n.current,e)||(n.current=e),n.current}function Oe(e,a,n){s.useEffect(e,Le(a,n))}function Qt(e,a,n){return s.useCallback(e,Le(a,n))}var A={ToastManager:"Polaris-Frame-ToastManager",ToastWrapper:"Polaris-Frame-ToastManager__ToastWrapper","ToastWrapper-enter":"Polaris-Frame-ToastManager__ToastWrapper--enter","ToastWrapper-exit":"Polaris-Frame-ToastManager__ToastWrapper--exit","ToastWrapper-enter-done":"Polaris-Frame-ToastManager--toastWrapperEnterDone","ToastWrapper--hoverable":"Polaris-Frame-ToastManager--toastWrapperHoverable"},T={Toast:"Polaris-Frame-Toast",Action:"Polaris-Frame-Toast__Action",error:"Polaris-Frame-Toast--error",CloseButton:"Polaris-Frame-Toast__CloseButton",LeadingIcon:"Polaris-Frame-Toast__LeadingIcon",toneMagic:"Polaris-Frame-Toast--toneMagic",WithActionOnComponent:"Polaris-Frame-Toast__WithActionOnComponent"};const Zt=5e3,Ne=1e4;function Yt({content:e,onDismiss:a,duration:n,error:t,action:o,tone:i,onClick:l,icon:u,isHovered:c}){const d=o&&!n?Ne:n||Zt,h=s.useRef(d),f=s.useRef(null),p=s.useRef(null);s.useEffect(()=>{function S(){f.current=Date.now(),p.current=setTimeout(()=>{a()},h.current)}function N(){f.current&&(h.current-=Date.now()-f.current),p.current&&clearTimeout(p.current),p.current=null}return c?N():S(),()=>{p.current&&clearTimeout(p.current)}},[c,a]),s.useEffect(()=>{o&&n&&n<Ne&&console.log("Toast with action should persist for at least 10,000 milliseconds to give the merchant enough time to act on it.")},[o,n]);const m=r.createElement("button",{type:"button",className:T.CloseButton,onClick:a},r.createElement(H,{source:ke,tone:"inherit"})),y=o?r.createElement("div",{className:T.Action},r.createElement(Q,{variant:"monochromePlain",removeUnderline:!0,size:"slim",onClick:o.onAction},o.content)):null;let v=null;t?v=r.createElement("div",{className:T.LeadingIcon},r.createElement(H,{source:rt,tone:"inherit"})):u&&(v=r.createElement("div",{className:T.LeadingIcon},r.createElement(H,{source:u,tone:"inherit"})));const F=E(T.Toast,t&&T.error,i&&T[q("tone",i)]);return!o&&l?r.createElement("button",{"aria-live":"assertive",className:E(F,T.WithActionOnComponent),type:"button",onClick:l},r.createElement(j,{keyCode:$.Escape,handler:a}),v,r.createElement(w,{gap:"400",blockAlign:"center"},r.createElement(I,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},i==="magic"&&{tone:"magic"}),e))):r.createElement("div",{className:F,"aria-live":"assertive"},r.createElement(j,{keyCode:$.Escape,handler:a}),v,r.createElement(w,{gap:"400",blockAlign:"center"},r.createElement(I,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},i==="magic"&&{tone:"magic"}),e)),y,m)}const Jt=10,Me=30;function ea(e){const a=n=>(n-1)*n/2;return e*Jt-a(e)}const ta=s.memo(function({toastMessages:a}){const n=[],[t,o]=s.useState(!1),i=s.useRef(!1),l=s.useRef(null),u=s.useRef(null),c=Qt(()=>{const d=a.length-1;a.forEach((h,f)=>{const p=d-f,m=n[f];if(!m.current)return;const y=m.current.clientHeight,v=t?1:.9**p,F=ea(p),S=t?y+(y-8)*p:y+F;m.current.style.setProperty("--pc-toast-manager-translate-y-in",`-${S}px`),m.current.style.setProperty("--pc-toast-manager-scale-in",`${v}`),m.current.style.setProperty("--pc-toast-manager-blur-in",t?"0":`${p*.5}px`),m.current.style.setProperty("--pc-toast-manager-transition-delay-in",`${t?p*Me:0}ms`),m.current.style.setProperty("--pc-toast-manager-scale-out",`${p===0?.85:v**2}`),m.current.style.setProperty("--pc-toast-manager-translate-y-out",`${-S}px`)})},[a,n,t]);Oe(()=>{c(),a.length===0&&o(!1),t?l.current=setTimeout(()=>{i.current=!0},a.length*Me+400):l.current&&(clearTimeout(l.current),i.current=!1)},[a,t]);const g=a.map((d,h)=>{const f=a.length-h-1,p=s.createRef();n[h]=p;function m(){o(!0)}function y(){i.current&&o(!1)}return r.createElement(se,{nodeRef:n[h],key:d.id,timeout:{enter:0,exit:200},classNames:aa},r.createElement("div",{ref:p,onMouseEnter:f>0?m:y},r.createElement("div",{ref:v=>f===0?u.current=v:null},r.createElement(Yt,Object.assign({},d,{isHovered:t})))))});return r.createElement(Pe,{idPrefix:"toast"},r.createElement(ie,{event:"resize",handler:c}),r.createElement("div",{className:A.ToastManager,"aria-live":"assertive",onMouseEnter:function(d){var p;const h=d.target,f=(p=u.current)==null?void 0:p.contains(h);o(!f)},onMouseLeave:function(){o(!1)}},r.createElement(Y,{component:null},g)))}),aa={enter:E(A.ToastWrapper,A["ToastWrapper-enter"]),enterDone:E(A.ToastWrapper,A["ToastWrapper-enter-done"]),exit:E(A.ToastWrapper,A["ToastWrapper-exit"])},xe="AppFrameMain",na="AppFrameNav",ra="AppFrameTopBar",oa="AppFrameLoadingBar";class ia extends s.PureComponent{constructor(...a){super(...a),this.state={skipFocused:!1,globalRibbonHeight:0,loadingStack:0,toastMessages:[],showContextualSaveBar:!1},this.contextualSaveBar=null,this.globalRibbonContainer=null,this.navigationNode=s.createRef(),this.setGlobalRibbonHeight=()=>{const{globalRibbonContainer:n}=this;n&&this.setState({globalRibbonHeight:n.offsetHeight},this.setGlobalRibbonRootProperty)},this.setOffset=()=>{const{offset:n="0px"}=this.props;ge("--pc-frame-offset",n)},this.setGlobalRibbonRootProperty=()=>{const{globalRibbonHeight:n}=this.state;ge("--pc-frame-global-ribbon-height",`${n}px`)},this.showToast=n=>{this.setState(({toastMessages:t})=>({toastMessages:t.find(({id:i})=>i===n.id)!=null?t:[...t,n]}))},this.hideToast=({id:n})=>{this.setState(({toastMessages:t})=>({toastMessages:t.filter(({id:o})=>n!==o)}))},this.setContextualSaveBar=n=>{const{showContextualSaveBar:t}=this.state;this.contextualSaveBar={...n},t===!0?this.forceUpdate():this.setState({showContextualSaveBar:!0})},this.removeContextualSaveBar=()=>{this.contextualSaveBar=null,this.setState({showContextualSaveBar:!1})},this.startLoading=()=>{this.setState(({loadingStack:n})=>({loadingStack:n+1}))},this.stopLoading=()=>{this.setState(({loadingStack:n})=>({loadingStack:Math.max(0,n-1)}))},this.handleResize=()=>{this.props.globalRibbon&&this.setGlobalRibbonHeight()},this.handleFocus=()=>{this.setState({skipFocused:!0})},this.handleBlur=()=>{this.setState({skipFocused:!1})},this.handleClick=n=>{const{skipToContentTarget:t}=this.props;t&&t.current&&(t.current.focus(),n==null||n.preventDefault())},this.handleNavigationDismiss=()=>{const{onNavigationDismiss:n}=this.props;n!=null&&n()},this.setGlobalRibbonContainer=n=>{this.globalRibbonContainer=n},this.handleNavKeydown=n=>{const{key:t}=n,{mediaQuery:{isNavigationCollapsed:o},showMobileNavigation:i}=this.props;o&&i&&t==="Escape"&&this.handleNavigationDismiss()}}componentDidMount(){this.handleResize(),!this.props.globalRibbon&&(this.setGlobalRibbonRootProperty(),this.setOffset())}componentDidUpdate(a){this.props.globalRibbon!==a.globalRibbon&&this.setGlobalRibbonHeight(),this.setOffset()}render(){const{skipFocused:a,loadingStack:n,toastMessages:t,showContextualSaveBar:o}=this.state,{logo:i,children:l,navigation:u,topBar:c,globalRibbon:g,showMobileNavigation:d=!1,skipToContentTarget:h,i18n:f,sidebar:p,mediaQuery:{isNavigationCollapsed:m}}=this.props,y=E(b.Navigation,d&&b["Navigation-visible"]),v=m&&!d,F=m&&d,S=F?0:-1,N={...F&&{"aria-modal":!0,role:"dialog"}},x=u?r.createElement(ct,null,te=>r.createElement(Ie,{trapping:F},r.createElement(se,{nodeRef:this.navigationNode,appear:m,exit:m,in:d,timeout:parseInt(te.motion["motion-duration-300"],10),classNames:sa},r.createElement("div",Object.assign({key:"NavContent"},N,{"aria-label":f.translate("Polaris.Frame.navigationLabel"),ref:this.navigationNode,className:y,onKeyDown:this.handleNavKeydown,id:na,hidden:v}),u,r.createElement("button",{type:"button",className:b.NavigationDismiss,onClick:this.handleNavigationDismiss,"aria-hidden":v||!m&&!d,"aria-label":f.translate("Polaris.Frame.Navigation.closeMobileNavigationLabel"),tabIndex:S},r.createElement(H,{source:le})))))):null,L=n>0?r.createElement("div",{className:b.LoadingBar,id:oa},r.createElement(Ot,null)):null,O=c?r.createElement("div",Object.assign({className:b.TopBar},fe.props,lt.props,{id:ra}),c):null,_=g?r.createElement("div",{className:b.GlobalRibbonContainer,ref:this.setGlobalRibbonContainer},g):null,J=E(b.Skip,a&&b.focused),G=h!=null&&h.current?h.current.id:xe,U=r.createElement("div",{className:J},r.createElement("a",{href:`#${G}`,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick},r.createElement(I,{as:"span",variant:"bodyLg",fontWeight:"medium"},f.translate("Polaris.Frame.skipToContent")))),z=u?{"data-has-navigation":!0}:{},de=E(b.Frame,u&&b.hasNav,c&&b.hasTopBar,p&&b.hasSidebar),ee=r.createElement(Wt,{in:o,className:b.ContextualSaveBar,type:"fade"},r.createElement(qt,this.contextualSaveBar)),V=d&&m?r.createElement(Be,{belowNavigation:!0,onClick:this.handleNavigationDismiss,onTouchStart:this.handleNavigationDismiss}):null,K={logo:i,showToast:this.showToast,hideToast:this.hideToast,toastMessages:t,startLoading:this.startLoading,stopLoading:this.stopLoading,setContextualSaveBar:this.setContextualSaveBar,removeContextualSaveBar:this.removeContextualSaveBar};return r.createElement(ce.Provider,{value:K},r.createElement("div",Object.assign({className:de},fe.props,z),U,O,x,ee,L,V,r.createElement("main",{className:b.Main,id:xe,"data-has-global-ribbon":!!g},r.createElement("div",{className:b.Content},l)),r.createElement(ta,{toastMessages:t}),_,r.createElement(ie,{event:"resize",handler:this.handleResize})))}}const sa={enter:E(b["Navigation-enter"]),enterActive:E(b["Navigation-enterActive"]),enterDone:E(b["Navigation-enterActive"]),exit:E(b["Navigation-exit"]),exitActive:E(b["Navigation-exitActive"])};function fa(e){const a=D(),n=ot();return r.createElement(ia,Object.assign({},e,{i18n:a,mediaQuery:n}))}const pa=s.memo(function(a){const n=s.useId(),{showToast:t,hideToast:o}=Ae();return Oe(()=>(t({id:n,...a}),()=>{o({id:n})}),[a]),null});export{fa as F,pa as T};
