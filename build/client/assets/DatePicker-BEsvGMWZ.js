import{R as o,r as D}from"./components-BGDyOe_B.js";import{a as J,u as Q,c as z,b as te,S as fe}from"./Page-BlBOquBD.js";var ie=function(e){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),o.createElement("path",{fillRule:"evenodd",d:"M3.5 10a.75.75 0 0 1 .75-.75h9.69l-2.72-2.72a.75.75 0 1 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06l2.72-2.72h-9.69a.75.75 0 0 1-.75-.75Z"}))};ie.displayName="ArrowRightIcon";const Pe=7;function ge(t,e,n=0){const a=new Date(e,t,1),m=a.getDay(),k=[[]];let s=k[0],u=a;const c=ce(n);for(let g=0;g<c.indexOf(m);g++)s.push(null);for(;u.getMonth()===t;)s.length===Pe&&(s=[],k.push(s)),s.push(u),u=new Date(e,t,u.getDate()+1);for(;s.length<7;)s.push(null);return k}function me(t,e){if(t==null)return!1;const{start:n,end:a}=e;return!!(n&&t>n&&a&&t<a)}function ke(t,e){if(t==null)return!1;const{start:n,end:a}=e;return!!(n&&w(n,t)||a&&w(a,t))}function w(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function ye(t,e){if(t==null)return{start:e,end:e};const{start:n,end:a}=t;return a&&(K(n,a)||I(n,a))?{start:e,end:e}:n?I(e,n)?{start:e,end:e}:{start:n,end:e}:a?I(e,a)?{start:e,end:a}:{start:n||a,end:e}:{start:e,end:e}}function ne(t){return t===11?0:t+1}function ae(t,e){return t===11?e+1:e}function he(t){return t===0?11:t-1}function be(t,e){return t===0?e-1:e}function K(t,e){return t.getTime()>e.getTime()}function I(t,e){return t.getTime()<e.getTime()}function Y(t,e){return e.some(n=>t.getTime()===n.getTime())}const we=[0,1,2,3,4,5,6];function ce(t){const e=[...we];return[...e.splice(t),...e]}function O(t){switch(t){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december"}}function re(t){switch(t){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday"}}var i={DatePicker:"Polaris-DatePicker",MonthLayout:"Polaris-DatePicker__MonthLayout",MonthContainer:"Polaris-DatePicker__MonthContainer",Month:"Polaris-DatePicker__Month",DayCell:"Polaris-DatePicker__DayCell","DayCell-inRange":"Polaris-DatePicker__DayCell--inRange",Day:"Polaris-DatePicker__Day","Day-inRange":"Polaris-DatePicker__Day--inRange","Day-selected":"Polaris-DatePicker__Day--selected","Day-disabled":"Polaris-DatePicker__Day--disabled",EmptyDayCell:"Polaris-DatePicker__EmptyDayCell",Weekday:"Polaris-DatePicker__Weekday",Header:"Polaris-DatePicker__Header",Title:"Polaris-DatePicker__Title","Day-firstInRange":"Polaris-DatePicker__Day--firstInRange","Day-hasRange":"Polaris-DatePicker__Day--hasRange","Day-hoverRight":"Polaris-DatePicker__Day--hoverRight","Day-lastInRange":"Polaris-DatePicker__Day--lastInRange",Week:"Polaris-DatePicker__Week"};const Ee=D.memo(function({label:e,title:n,current:a}){return o.createElement("th",{"aria-label":e,scope:"col",className:i.Weekday},o.createElement(J,{as:"span",variant:"bodySm",alignment:"center",fontWeight:a?"bold":"regular",tone:a?void 0:"subdued"},n))}),se=D.memo(function({day:e,focused:n,onClick:a,onHover:m=V,onFocus:k=V,selected:s,inRange:u,inHoveringRange:c,disabled:g,lastDayOfMonth:E,isLastSelectedDay:f,isFirstSelectedDay:p,isHoveringRight:y,rangeIsDifferent:M,weekday:d,selectedAccessibilityLabelPrefix:v}){const h=Q(),x=D.useRef(null),_=E||e;if(D.useEffect(()=>{n&&x.current&&x.current.focus()},[n]),!e)return o.createElement("td",{className:i.EmptyDayCell,onMouseOver:()=>m(_)});const L=a&&!g?a.bind(null,e):V,W=w(new Date,e),A=z(i.DayCell,s&&i["DayCell-selected"],(u||c)&&!g&&i["DayCell-inRange"],f&&i["DayCell-lastInRange"],p&&i["DayCell-firstInRange"],y&&i["DayCell-hoverRight"],M&&i["DayCell-hasRange"]),F=z(i.Day,s&&i["Day-selected"],g&&i["Day-disabled"],(u||c)&&!g&&i["Day-inRange"],f&&i["Day-lastInRange"],p&&i["Day-firstInRange"],y&&i["Day-hoverRight"],M&&i["Day-hasRange"]),b=e.getDate(),r=(n||s||W||b===1)&&!g?0:-1,C=[s&&v?`${v} `:"",`${W?h.translate("Polaris.DatePicker.today"):""}`,`${d||""} `,`${h.translate(`Polaris.DatePicker.months.${O(e.getMonth())}`)} `,`${b} `,`${e.getFullYear()}`].join("");return o.createElement("td",{className:A},o.createElement("button",{onFocus:()=>k(e),type:"button",ref:x,tabIndex:r,className:F,onMouseOver:()=>m(_),onClick:L,"aria-label":C,"aria-disabled":g,"aria-pressed":s},o.createElement(J,{as:"span",variant:"bodySm",alignment:"center",fontWeight:W?"bold":"regular"},b)))});function V(){}function oe({focusedDate:t,selected:e,hoverDate:n,disableDatesBefore:a,disableDatesAfter:m,disableSpecificDates:k,allowRange:s,onChange:u=Z,onHover:c=Z,onFocus:g=Z,month:E,year:f,weekStartsOn:p,accessibilityLabelPrefixes:y}){const M=Q(),d=s?ve:()=>!1,v=new Date,h=v.getMonth()===E&&v.getFullYear()===f,x=D.useMemo(()=>ge(E,f,p),[E,p,f]),_=ce(p).map(r=>o.createElement(Ee,{key:r,title:M.translate(`Polaris.DatePicker.daysAbbreviated.${re(r)}`),label:b(r),current:h&&new Date().getDay()===r})),L=D.useCallback(r=>{u(ye(s?e:void 0,r))},[s,u,e]),W=D.useMemo(()=>new Date(f,E+1,0),[E,f]);function A(r,C){if(r==null)return o.createElement(se,{key:C,onHover:c,lastDayOfMonth:W});const j=a&&I(r,a)||m&&K(r,m)||k&&Y(r,k),$=s&&e&&pe(r,e),T=s&&e&&(!w(e.start,e.end)&&_e(r,e)||n&&w(e.start,e.end)&&K(n,e.start)&&w(r,n)&&!$),U=!(e&&w(e.start,e.end)),B=n&&I(r,n),[S,G]=y;let H;return s&&$||!s&&S?H=S:s&&T&&(H=G),o.createElement(se,{selectedAccessibilityLabelPrefix:H,weekday:b(C),focused:t!=null&&w(r,t),day:r,key:C,onFocus:g,onClick:L,onHover:c,selected:e!=null&&ke(r,e),inRange:e!=null&&me(r,e),disabled:j,inHoveringRange:e!=null&&n!=null&&d(r,e,n),isLastSelectedDay:T,isFirstSelectedDay:$,isHoveringRight:B,rangeIsDifferent:U})}const F=x.map((r,C)=>o.createElement("tr",{className:i.Week,key:C},r.map(A)));return o.createElement("div",{className:i.MonthContainer},o.createElement("table",{role:"grid",className:i.Month},o.createElement("caption",{className:i.Title},o.createElement(J,{as:"span",variant:"bodyMd",alignment:"center",fontWeight:h?"bold":"medium"},M.translate(`Polaris.DatePicker.months.${O(E)}`)," ",f)),o.createElement("thead",null,o.createElement("tr",{className:i.WeekHeadings},_)),o.createElement("tbody",null,F)));function b(r){return M.translate(`Polaris.DatePicker.days.${re(r)}`)}}function Z(){}function ve(t,e,n){if(t==null)return!1;const{start:a,end:m}=e;return!!(w(a,m)&&t>a&&t<=n)}function _e(t,e){if(t==null)return!1;const{end:n}=e;return!!(n&&w(n,t))}function pe(t,e){if(t==null)return!1;const{start:n}=e;return!!(n&&w(n,t))}function de({id:t,selected:e,month:n,year:a,allowRange:m,multiMonth:k,disableDatesBefore:s,disableDatesAfter:u,disableSpecificDates:c,weekStartsOn:g=0,dayAccessibilityLabelPrefix:E,onMonthChange:f,onChange:p=Me}){const y=Q(),[M,d]=D.useState(void 0),[v,h]=D.useState(void 0);D.useEffect(()=>{h(void 0)},[e]);const x=D.useCallback(P=>{h(P)},[]),_=D.useCallback(P=>{f&&f(P.getMonth(),P.getFullYear()),d(P),h(P)},[f]),L=D.useCallback(P=>{const{end:N}=P;d(N),h(new Date(N)),p(P)},[p]),W=D.useCallback((P,N)=>{f&&(h(void 0),f(P,N))},[f]),A=D.useCallback(P=>{d(P)},[]),F=D.useCallback(P=>{const{key:N}=P,ee=q(e),R=v||ee&&ee.start;if(R!=null){if(N==="ArrowUp"){const l=new Date(R);l.setDate(R.getDate()-7),s&&I(l,s)||c&&Y(l,c)||_(l)}if(N==="ArrowDown"){const l=new Date(R);l.setDate(R.getDate()+7),u&&K(l,u)||c&&Y(l,c)||_(l)}if(N==="ArrowRight"){const l=new Date(R);l.setDate(R.getDate()+1),u&&K(l,u)||c&&Y(l,c)||_(l)}if(N==="ArrowLeft"){const l=new Date(R);l.setDate(R.getDate()-1),s&&I(l,s)||c&&Y(l,c)||_(l)}}},[u,s,c,v,e,_]),b=ae(n,a),r=ne(n),C=ae(r,b),j=ne(r),$=be(n,a),T=he(n),U=y.translate(`Polaris.DatePicker.months.${O(T)}`),B=k?y.translate(`Polaris.DatePicker.months.${O(j)}`):y.translate(`Polaris.DatePicker.months.${O(r)}`),S=k?C:b,G=D.useMemo(()=>q(e),[e]),H=m?y.translate("Polaris.DatePicker.start"):E,le=y.translate("Polaris.DatePicker.end"),X=[H,le],ue=k?o.createElement(oe,{onFocus:x,focusedDate:v,month:r,year:b,selected:G,hoverDate:M,onChange:L,onHover:A,disableDatesBefore:s,disableDatesAfter:u,disableSpecificDates:c,allowRange:m,weekStartsOn:g,accessibilityLabelPrefixes:X}):null,De=z(i.DatePicker);return o.createElement("div",{id:t,className:De,onKeyDown:Ce,onKeyUp:F},o.createElement("div",{className:i.Header},o.createElement(te,{variant:"tertiary",icon:fe,accessibilityLabel:y.translate("Polaris.DatePicker.previousMonth",{previousMonthName:U,showPreviousYear:$}),onClick:()=>W(T,$)}),o.createElement(te,{variant:"tertiary",icon:ie,accessibilityLabel:y.translate("Polaris.DatePicker.nextMonth",{nextMonth:B,nextYear:S}),onClick:()=>W(r,b)})),o.createElement("div",{className:i.MonthLayout},o.createElement(oe,{onFocus:x,focusedDate:v,month:n,year:a,selected:q(e),hoverDate:M,onChange:L,onHover:A,disableDatesBefore:s,disableDatesAfter:u,disableSpecificDates:c,allowRange:m,weekStartsOn:g,accessibilityLabelPrefixes:X}),ue))}function Me(){}function Ce(t){const{key:e}=t;(e==="ArrowUp"||e==="ArrowDown"||e==="ArrowLeft"||e==="ArrowRight")&&(t.preventDefault(),t.stopPropagation())}function q(t){return t instanceof Date?{start:t,end:t}:t}export{de as D};
