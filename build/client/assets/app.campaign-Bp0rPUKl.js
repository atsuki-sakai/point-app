import{r as o,R as n,a as A,u as G,j as e,F as N}from"./components-BGDyOe_B.js";import{_ as Y}from"./index-DDnn9pDE.js";import{c as y,d as L,e as g,B as i,a as s,I as O,P as $,C as _,T as f,b as I,f as q,g as H}from"./Page-BlBOquBD.js";import{I as F,L as D}from"./Layout-9hDooW2t.js";import{F as J,T as K}from"./Toast-BgRIItsV.js";import{D as Q}from"./DatePicker-BEsvGMWZ.js";import{C as U}from"./Checkbox-s0aEpANt.js";import"./context-D0ShNtlm.js";import"./context-DraICPrr.js";var r={ImageContainer:"Polaris-EmptyState__ImageContainer",Image:"Polaris-EmptyState__Image",loaded:"Polaris-EmptyState--loaded",imageContained:"Polaris-EmptyState--imageContained",SkeletonImageContainer:"Polaris-EmptyState__SkeletonImageContainer",SkeletonImage:"Polaris-EmptyState__SkeletonImage"};function V({children:m,heading:d,image:t,largeImage:l,imageContained:k,fullWidth:E=!1,action:x,secondaryAction:c,footerContent:j}){const[p,b]=o.useState(!1),u=o.useCallback(()=>{b(!0)},[]),C=y(r.Image,p&&r.loaded,k&&r.imageContained),S=l?n.createElement(F,{alt:"",role:"presentation",source:l,className:C,sourceSet:[{source:t,descriptor:"568w"},{source:l,descriptor:"1136w"}],sizes:"(max-width: 568px) 60vw",onLoad:u}):n.createElement(F,{alt:"",role:"presentation",className:C,source:t,onLoad:u}),a=y(r.SkeletonImage,p&&r.loaded),h=y(r.ImageContainer,!p&&r.SkeletonImageContainer),z=n.createElement("div",{className:h},S,n.createElement("div",{className:a})),v=c?L(c,{}):null,M=j?n.createElement(g,{paddingBlockStart:"400"},n.createElement(s,{as:"span",alignment:"center",variant:"bodySm"},j)):null,w=x?L(x,{variant:"primary",size:"medium"}):null,B=d?n.createElement(g,{paddingBlockEnd:"150"},n.createElement(s,{variant:"headingMd",as:"p",alignment:"center"},d)):null,R=m?n.createElement(s,{as:"span",alignment:"center",variant:"bodySm"},m):null,P=B||m?n.createElement(g,{paddingBlockEnd:"400"},B,R):null,T=w||v?n.createElement(O,{align:"center",gap:"200"},v,w):null,W=P||T||M?n.createElement(g,{maxWidth:E?"100%":"400px"},n.createElement(i,{inlineAlign:"center"},P,T,M)):null;return n.createElement(g,{paddingInlineStart:"0",paddingInlineEnd:"0",paddingBlockStart:"500",paddingBlockEnd:"1600"},n.createElement(i,{inlineAlign:"center"},z,W))}function oe(){var S;const m=A(),{merchantCampaigns:d}=G();console.log(d);const[t,l]=o.useState({id:"",merchant_id:"",name:"",start_date:"",end_date:"",special_point_rate:0,point_excluded_product_ids:[],publish:!0}),[{month:k,year:E},x]=o.useState({month:new Date().getMonth(),year:new Date().getFullYear()}),[c,j]=o.useState({start:new Date,end:new Date}),p=o.useCallback((a,h)=>x({month:a,year:h}),[]),[b,u]=o.useState(!1),C=b?e.jsx(K,{content:"キャンペーンを作成しました",onDismiss:()=>u(!1)}):null;return e.jsx(e.Fragment,{children:e.jsxs($,{children:[e.jsx(Y,{title:"キャンペーン設定"}),e.jsx(D,{children:e.jsx(D.Section,{children:e.jsxs(J,{children:[C,e.jsxs(i,{gap:"400",children:[e.jsx(s,{fontWeight:"bold",as:"h1",children:"キャンペーンを作成する"}),e.jsx(_,{children:e.jsx(N,{method:"POST",children:e.jsxs(i,{gap:"400",children:[e.jsx(f,{label:"キャンペーン名",id:"name",placeholder:"キャンペーン名を入力してください",name:"name",value:t==null?void 0:t.name,onChange:a=>l({...t,name:a}),autoComplete:"off"}),e.jsx(Q,{month:k,year:E,onChange:j,onMonthChange:p,selected:c,multiMonth:!0,allowRange:!0}),e.jsx(f,{id:"start_date",label:"開始日",placeholder:"開始日を入力してください",name:"start_date",readOnly:!0,value:c.start.toISOString().split("T")[0],autoComplete:"off"}),e.jsx(f,{label:"終了日",id:"end_date",placeholder:"終了日を入力してください",name:"end_date",readOnly:!0,value:c.end.toISOString().split("T")[0],autoComplete:"off"}),e.jsx(f,{label:"ポイント還元率",id:"special_point_rate",placeholder:"ポイント還元率を入力してください",name:"special_point_rate",suffix:"%",type:"number",value:(S=t==null?void 0:t.special_point_rate)==null?void 0:S.toString(),onChange:a=>l({...t,special_point_rate:Number(a)}),autoComplete:"off"}),e.jsx("input",{type:"hidden",name:"publish",value:t!=null&&t.publish?"true":"false"}),e.jsx(U,{label:"有効にする",checked:t==null?void 0:t.publish,onChange:a=>l({...t,publish:a})}),e.jsx(I,{submit:!0,variant:"primary",size:"large",onClick:()=>u(!0),children:"キャンペーンを作成"})]})})}),e.jsx(_,{children:d.length===0?e.jsx(V,{heading:"まだキャンペーンがありません.",action:{content:"キャンペーンを作成"},image:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",children:e.jsx("p",{children:"キャンペーンを作成して、ポイント還元率を設定しましょう。"})}):e.jsx(_,{padding:"400",children:e.jsxs(i,{gap:"400",children:[e.jsx(s,{fontWeight:"bold",as:"h1",alignment:"center",children:"キャンペーン一覧"}),e.jsx(i,{gap:"800",children:d.map((a,h)=>e.jsx(_,{children:e.jsxs(i,{gap:"400",children:[e.jsx(s,{fontWeight:"bold",as:"h1",children:a.name}),e.jsxs(O,{gap:"400",children:[e.jsxs(s,{as:"span",children:["開始日: ",a.start_date]}),e.jsxs(s,{as:"span",children:["終了日: ",a.end_date]}),e.jsx(q,{size:"small",tone:a.publish?"success":"critical",children:a.publish?"有効":"無効"}),e.jsxs(s,{as:"span",children:["ポイント還元率:"," ",a.special_point_rate,"%"]})]}),e.jsxs(H,{children:[e.jsx(I,{variant:"primary",onClick:()=>m(`/app/campaign-edit/${a.id}`),children:"キャンペーンを編集"}),e.jsxs(N,{method:"DELETE",children:[e.jsx("input",{type:"hidden",name:"delete-campaign-id",value:a.id}),e.jsx(I,{variant:"primary",tone:"critical",submit:!0,children:"キャンペーンを削除"})]})]})]})},h))})]})})})]})]})})})]})})}export{oe as default};
